var TrailManager=function(){function n(n,t){this._trailColor=n,this._owner=t,this._trailArchive=[],this._pendingContexts=[],this.StartTrail(this._owner.MovementController.Velocity,this._owner.Context.position)}return n.prototype.StartTrail=function(n,t){var r,i;this.CurrentTrail!=null&&(r=t.clone(),this.CurrentTrail.ExtendTo(r),this.LastTrail=this.CurrentTrail),n.x!==0?i="x":n.z!==0&&(i="z"),this.CurrentTrail=new Trail(i,t,this._trailColor,this._owner.ID),this._trailArchive.push(this.CurrentTrail),this._pendingContexts.push(this.CurrentTrail.CreateContext())},n.prototype.PullPendingContexts=function(){if(this._pendingContexts.length>0){var n=this._pendingContexts;return this._pendingContexts=[],n}return[]},n.prototype.Update=function(){this.CurrentTrail&&this.CurrentTrail.ExtendTo(this._owner.Context.position)},n}()