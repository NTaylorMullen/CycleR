var __extends=this.__extends||function(n,t){function i(){this.constructor=n}i.prototype=t.prototype,n.prototype=new i},CycleMovementController=function(n){function t(i){n.call(this,i,t.MAX_SPEED),this._context=i,this._context.position.y=t.Y_OFFSET,this.Velocity.z=-t.MAX_SPEED}return __extends(t,n),t.MAX_SPEED=700,t.Y_OFFSET=35,t.prototype.positionOnLine=function(){this.Velocity.z!==0?this._context.position.z-=this._context.position.z%Map.FLOOR_TILE_SIZE.Width-Map.FLOOR_TILE_SIZE.Width*(this.Velocity.z/Math.abs(this.Velocity.z)):this.Velocity.x!==0&&(this._context.position.x-=this._context.position.x%Map.FLOOR_TILE_SIZE.Width-Map.FLOOR_TILE_SIZE.Width*(this.Velocity.x/Math.abs(this.Velocity.x)))},t.prototype.swapXZVelocity=function(){var n=this.Velocity.x;this.Velocity.x=this.Velocity.z,this.Velocity.z=n},t.prototype.Move=function(n){this.positionOnLine(),n==="Left"?(this._context.rotation.y+=Math.PI/2,this.Velocity.x*=-1):n==="Right"&&(this._context.rotation.y-=Math.PI/2,this.Velocity.z*=-1),this.swapXZVelocity()},t.prototype.Update=function(t){n.prototype.Update.call(this,t);var i=this.Velocity.clone().multiplyScalar(t.FractionOfSecond);this._context.position.addSelf(i)},t}(MovementController)